Index: extensions/SemanticMediaWiki/includes/SMW_ParseData.php
===================================================================
--- extensions/SemanticMediaWiki/includes/SMW_ParseData.php	(revision 5861)
+++ extensions/SemanticMediaWiki/includes/SMW_ParseData.php	(working copy)
@@ -287,6 +287,45 @@
 		$pmdat = SMWPropertyValue::makeProperty('_MDAT');
 		$dv = SMWDataValueFactory::newPropertyObjectValue($pmdat,  $wgContLang->sprintfDate('d M Y G:i:s',$article->getTimestamp()));
 		$semdata->addPropertyObjectValue($pmdat,$dv);
+		
+/*op-patch|TS|2009-12-11|SMWHalo|Additional builtin properties|start*/
+		global $wgUser, $wgRequest;
+		if (isset($wgUser) && $wgRequest->getVal('action') == 'submit') {
+			// I guess action is not 'submit' when this is called from a job
+			$thisRev = $title->getLatestRevID();
+			$pcreator = SMWPropertyValue::makeProperty('___CREA');
+			$pcreationDate = SMWPropertyValue::makeProperty('___CREADT');
+			$dvCreator = null;
+			$dvCreationDate = null;
+			if ($title->getPreviousRevisionID($thisRev) === false) {
+				// Article is about to be created
+				// => add creator and creation date
+				$dvCreator = SMWDataValueFactory::newPropertyObjectValue($pcreator, $wgUser->getName());
+				$dvCreationDate = SMWDataValueFactory::newPropertyObjectValue($pcreationDate, $wgContLang->sprintfDate('d M Y G:i:s',$article->getTimestamp()));
+			} else {
+				// Article already exists but creation properties do not change
+				// => get them from the store
+				$dvCreator = smwfGetStore()->getPropertyValues($title, $pcreator);
+				$dvCreationDate = smwfGetStore()->getPropertyValues($title, $pcreationDate);
+				$dvCreator = empty($dvCreator) ? null : $dvCreator[0];
+				$dvCreationDate = empty($dvCreationDate) ? null : $dvCreationDate[0];
+			}
+			if ($dvCreator) {
+				$semdata->addPropertyObjectValue($pcreator, $dvCreator);
+			}
+			
+			if ($dvCreationDate) {
+				$semdata->addPropertyObjectValue($pcreationDate, $dvCreationDate);
+			}
+			
+			// store who modified the article
+			$pmod = SMWPropertyValue::makeProperty('___MOD');
+			$dv = SMWDataValueFactory::newPropertyObjectValue($pmod,  $wgUser->getName());
+			$semdata->addPropertyObjectValue($pmod,$dv);
+
+		}
+		
+/*op-patch|TS|2009-12-11|end*/
 		return true;
 	}
 
